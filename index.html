<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Evan Frawley — Portfolio Highlights</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">

  <style>
    :root{
      --ui-font: Arial, Helvetica, sans-serif;
      --ui-border: #7fa1bb;
      --ui-bg-top: linear-gradient(#cfe1f1, #9fc0d8);
    }

    html, body { height: 100%; margin: 0; background: #e7eef5; }

    .stage{
      height: 100%;
      display: grid;
      place-items: center;
      padding: 18px;
      box-sizing: border-box;
      font-family: var(--ui-font);
    }

    .gmaps-window{
      width: min(1100px, 100%);
      aspect-ratio: 16 / 10;
      border: 2px solid var(--ui-border);
      box-shadow: 0 12px 28px rgba(0,0,0,.18);
      background: #dfeaf4;
      position: relative;
      overflow: hidden;
    }

    .titlebar{
      height: 26px;
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 0 8px;
      background: var(--ui-bg-top);
      border-bottom: 1px solid rgba(0,0,0,.25);
      font-size: 12px;
      font-weight: 700;
      color: #0b2a3d;
      user-select: none;
      position: relative;
      z-index: 950;
    }

    .dot{
      width: 12px; height: 12px; border-radius: 50%;
      background: radial-gradient(#ffffff, #c9c9c9);
      border: 1px solid rgba(0,0,0,.25);
    }

    .winbtns{ margin-left: auto; display: flex; gap: 6px; }

    .winbtn{
      width: 18px; height: 14px;
      border: 1px solid rgba(0,0,0,.35);
      background: linear-gradient(#ffffff, #d9d9d9);
      border-radius: 2px;
      position: relative;
      overflow: hidden;
    }

    .map-wrap{ position: absolute; inset: 26px 0 0 0; }

    #map{
      height: 100%;
      width: 100%;
      filter: saturate(1.05) contrast(1.05);
      transform: scale(1.01);
    }

    .warp-overlay{
      pointer-events: none;
      position: absolute;
      inset: 0;
      opacity: .18;
      mix-blend-mode: soft-light;
      background:
        radial-gradient(circle at 20% 30%, rgba(255,255,255,.35), transparent 42%),
        radial-gradient(circle at 70% 60%, rgba(0,0,0,.25), transparent 45%),
        linear-gradient(115deg, rgba(255,255,255,.12), rgba(0,0,0,.10));
      animation: drift 14s ease-in-out infinite;
      z-index: 450;
    }

    @keyframes drift{
      0%   { transform: translate(0,0) scale(1); }
      50%  { transform: translate(-8px,6px) scale(1.02); }
      100% { transform: translate(0,0) scale(1); }
    }

    /* Popups */
    .leaflet-popup-content-wrapper{
      border-radius: 14px;
      box-shadow: 0 10px 26px rgba(0,0,0,.22);
      border: 1px solid rgba(0,0,0,.18);
    }
    .leaflet-popup-tip{ box-shadow: 0 10px 26px rgba(0,0,0,.22); }

    .popup{
      width: 320px;
      font-family: var(--ui-font);
    }
    .popup img{
      width: 100%;
      height: 170px;
      object-fit: cover;
      border-radius: 10px;
      display: block;
      background: #eee;
    }
    .popup .title{
      font-size: 12px;
      font-weight: 800;
      line-height: 1.2;
      margin: 10px 0 8px 0;
    }
    .popup .meta{
      display:flex;
      justify-content: space-between;
      align-items:center;
      gap:10px;
      font-size: 11px;
      font-weight: 700;
      color: rgba(0,0,0,.75);
    }
    .popup .meta a{
      text-decoration: none;
      padding: 5px 10px;
      border: 1px solid rgba(0,0,0,.25);
      background: linear-gradient(#ffffff, #e2e2e2);
      color: #111;
      border-radius: 3px;
      position: relative;
      overflow: hidden;
      flex: 0 0 auto;
    }

    /* Hide Leaflet default zoom (we're making our own) */
    .leaflet-control-zoom{ display:none; }

    /* Retro zoom rail */
    .retro-zoom{
      position: absolute;
      top: 46px;
      left: 14px;
      z-index: 700;
      width: 32px;
      display: grid;
      gap: 6px;
      user-select: none;
    }

    .rz-btn{
      width: 32px;
      height: 32px;
      display: grid;
      place-items: center;
      font-weight: 900;
      font-size: 18px;
      border: 2px solid rgba(0,0,0,.55);
      background: linear-gradient(#ffffff, #dcdcdc);
      box-shadow: 0 2px 6px rgba(0,0,0,.25);
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }

    .rz-rail{
      width: 32px;
      height: 220px;
      border: 2px solid rgba(0,0,0,.55);
      background: linear-gradient(#d7e7f6, #c0d6ea);
      box-shadow: 0 2px 6px rgba(0,0,0,.25);
      position: relative;
      overflow: hidden;
    }

    .rz-rail::before{
      content:"";
      position:absolute;
      inset: 10px 12px 10px 12px;
      background:
        repeating-linear-gradient(
          to bottom,
          rgba(0,0,0,.45) 0px,
          rgba(0,0,0,.45) 2px,
          transparent 2px,
          transparent 12px
        );
      opacity: .55;
    }

    .rz-thumb{
      position:absolute;
      left: 5px;
      width: 22px;
      height: 10px;
      border: 2px solid rgba(0,0,0,.55);
      background: linear-gradient(#ffffff, #dedede);
      box-shadow: 0 1px 4px rgba(0,0,0,.25);
      border-radius: 2px;
      top: 20px;
    }

    /* Pixel-grid texture overlay */
    .gmaps-window::after{
      content:"";
      position:absolute;
      inset:0;
      pointer-events:none;
      opacity:.10;
      mix-blend-mode:multiply;
      background:
        linear-gradient(rgba(0,0,0,.06) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0,0,0,.06) 1px, transparent 1px),
        repeating-linear-gradient(45deg,
          rgba(255,255,255,.08) 0px,
          rgba(255,255,255,.08) 1px,
          rgba(0,0,0,.02) 2px,
          rgba(0,0,0,.02) 3px
        );
      background-size: 3px 3px, 3px 3px, 6px 6px;
      z-index: 900;
    }

    /* Pixel texture on UI buttons */
    .popup .meta a::after,
    .winbtn::after,
    .rz-btn::after{
      content:"";
      position:absolute;
      inset:0;
      pointer-events:none;
      opacity:.10;
      background:
        linear-gradient(rgba(0,0,0,.05) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0,0,0,.05) 1px, transparent 1px);
      background-size: 3px 3px;
      mix-blend-mode: multiply;
    }
  </style>
</head>

<body>
  <div class="stage">
    <div class="gmaps-window">
      <div class="titlebar">
        <span class="dot"></span>
        <span>Portfolio Highlights</span>
        <div class="winbtns">
          <span class="winbtn"></span><span class="winbtn"></span><span class="winbtn"></span>
        </div>
      </div>

      <div class="map-wrap">
        <div id="map"></div>
        <div class="warp-overlay"></div>

        <div class="retro-zoom" aria-label="Map zoom controls">
          <div class="rz-btn" id="zoomIn" title="Zoom in">+</div>
          <div class="rz-rail" title="Zoom level">
            <div class="rz-thumb" id="zoomThumb"></div>
          </div>
          <div class="rz-btn" id="zoomOut" title="Zoom out">−</div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    const projects = [
      {
        title: "Art & Social Sustainability: Public Spaces That Inspire",
        lat: 60.17744444444444,
        lng: 24.92025,
        image: "https://frawleyevan9.wordpress.com/wp-content/uploads/2026/01/img_9917.jpg",
        link: "https://frawleyevan9.wordpress.com/writing/"
      },
      {
        title: "Cycling Safety Perceptions in Marburg, Germany: A Spatial Analysis",
        lat: 50.80775,
        lng: 8.772333333333334,
        image: "https://frawleyevan9.wordpress.com/wp-content/uploads/2026/01/marburg-03.jpg",
        link: "https://frawleyevan9.wordpress.com/maps/"
      },
      {
        title: "Car-Free in the Capital of Sprawl: The Trade-Offs of Living in Culdesac Tempe",
        lat: 33.41408333333333,
        lng: -111.89933333333335,
        image: "https://frawleyevan9.wordpress.com/wp-content/uploads/2026/01/img_1080.jpg",
        link: "https://frawleyevan9.wordpress.com/writing/"
      },
      {
        title: "River Point District Project Proposal",
        lat: 44.09505555555556,
        lng: -87.66352777777779,
        image: "https://frawleyevan9.wordpress.com/wp-content/uploads/2026/01/screenshot-2026-01-14-184127.png",
        link: "https://frawleyevan9.wordpress.com/writing/"
      },
      {
        title: "Beyond Decibels: A Soundscape-Based Policy Framework for Urban Noise Pollution in Madison, Wisconsin",
        lat: 43.034555555555556,
        lng: -89.43697222222222,
        image: "https://frawleyevan9.wordpress.com/wp-content/uploads/2026/01/geog280final4.png",
        link: "https://frawleyevan9.wordpress.com/sound/"
      }
    ];

    const map = L.map("map", {
      attributionControl: false,
      scrollWheelZoom: false
    }).setView([45, -20], 2);

    L.tileLayer(
      "https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",
      { maxZoom: 19 }
    ).addTo(map);

    const bounds = [];
    projects.forEach(p => {
      bounds.push([p.lat, p.lng]);

      const popupHTML = `
        <div class="popup">
          <img src="${p.image}" alt="${p.title}">
          <div class="title">${p.title}</div>
          <div class="meta">
            <span>${p.lat.toFixed(6)}, ${p.lng.toFixed(6)}</span>
            <a href="${p.link}" target="_top" rel="noopener">Open</a>
          </div>
        </div>
      `;

      L.marker([p.lat, p.lng]).addTo(map).bindPopup(popupHTML, { maxWidth: 360 });
    });

    if (bounds.length > 1) map.fitBounds(bounds, { padding: [40, 40] });

    // wire zoom buttons
    document.getElementById("zoomIn").addEventListener("click", () => map.zoomIn());
    document.getElementById("zoomOut").addEventListener("click", () => map.zoomOut());

    // update thumb position with zoom
    const thumb = document.getElementById("zoomThumb");
    function updateThumb(){
      const min = map.getMinZoom() ?? 0;
      const max = map.getMaxZoom() ?? 19;
      const z = map.getZoom();

      const rail = 220;
      const padTop = 14, padBottom = 14;
      const usable = rail - padTop - padBottom - 10;

      const t = (z - min) / (max - min);
      const y = padTop + (1 - t) * usable;
      thumb.style.top = `${Math.round(y)}px`;
    }
    map.on("zoomend", updateThumb);
    updateThumb();
  </script>
</body>
</html>
